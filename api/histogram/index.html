
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the PUMA plotting framework">
      
      
        <meta name="author" content="Umami Team">
      
      
        <link rel="canonical" href="https://umami-hep.github.io/puma/api/histogram/">
      
      
        <link rel="prev" href="../plot_base/">
      
      
        <link rel="next" href="../roc/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Histogram - PUMA: Plotting UMami Api</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#puma.histogram.Histogram" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PUMA: Plotting UMami Api" class="md-header__button md-logo" aria-label="PUMA: Plotting UMami Api" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PUMA: Plotting UMami Api
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Histogram
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/umami-hep/puma" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../hlapi/" class="md-tabs__link">
          
  
    
  
  High level API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/tutorial-plotting/" class="md-tabs__link">
        
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dev/development_guidelines/" class="md-tabs__link">
          
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../plot_base/" class="md-tabs__link">
          
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PUMA: Plotting UMami Api" class="md-nav__button md-logo" aria-label="PUMA: Plotting UMami Api" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PUMA: Plotting UMami Api
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/umami-hep/puma" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../examples/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dummy_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dummy Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/histograms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Histograms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/rocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROC curves
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/int_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrated efficiency plot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/var_vs_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable vs efficiency Plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/fraction_scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fraction Scan Plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pie_charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pie charts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/line_plots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Line plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/confusion_matrix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confusion Matrix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/precision_recall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precision Recall
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/matrix_plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix Plot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../hlapi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    High level API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            High level API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/high_level_aux_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High level API for aux task plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/n_track_origin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Number of Tracks per Jet per Origin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/yuma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YUMA (Yaml Plotting)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/tutorial-plotting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/development_guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Good coding practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docs_development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docs development
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot_base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Histogram
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Histogram
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#puma.histogram.Histogram" class="md-nav__link">
    <span class="md-ellipsis">
      Histogram
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Histogram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.args_to_store" class="md-nav__link">
    <span class="md-ellipsis">
      args_to_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.divide" class="md-nav__link">
    <span class="md-ellipsis">
      divide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.divide_data_mc" class="md-nav__link">
    <span class="md-ellipsis">
      divide_data_mc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.get_discrete_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_discrete_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot" class="md-nav__link">
    <span class="md-ellipsis">
      HistogramPlot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HistogramPlot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.add_bin_width_to_ylabel" class="md-nav__link">
    <span class="md-ellipsis">
      add_bin_width_to_ylabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.draw" class="md-nav__link">
    <span class="md-ellipsis">
      draw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.get_reference_histo" class="md-nav__link">
    <span class="md-ellipsis">
      get_reference_histo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.plot_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      plot_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.set_reference" class="md-nav__link">
    <span class="md-ellipsis">
      set_reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../int_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrated Efficiency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../var_vs_var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable vs Variable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fraction_scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fraction Scan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pie_chart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pie Chart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../matshow_plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matshow Plot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#puma.histogram.Histogram" class="md-nav__link">
    <span class="md-ellipsis">
      Histogram
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Histogram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.args_to_store" class="md-nav__link">
    <span class="md-ellipsis">
      args_to_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.divide" class="md-nav__link">
    <span class="md-ellipsis">
      divide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.divide_data_mc" class="md-nav__link">
    <span class="md-ellipsis">
      divide_data_mc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.get_discrete_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_discrete_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.Histogram.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot" class="md-nav__link">
    <span class="md-ellipsis">
      HistogramPlot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HistogramPlot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.add_bin_width_to_ylabel" class="md-nav__link">
    <span class="md-ellipsis">
      add_bin_width_to_ylabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.draw" class="md-nav__link">
    <span class="md-ellipsis">
      draw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.get_reference_histo" class="md-nav__link">
    <span class="md-ellipsis">
      get_reference_histo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.plot_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      plot_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.histogram.HistogramPlot.set_reference" class="md-nav__link">
    <span class="md-ellipsis">
      set_reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Histogram</h1>

<div class="doc doc-object doc-class">



<h2 id="puma.histogram.Histogram" class="doc doc-heading">
              <code class=" language-python"><span class="n">puma</span><span class="o">.</span><span class="n">histogram</span><span class="o">.</span><span class="n">Histogram</span></code>

<a href="#puma.histogram.Histogram" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="puma">puma</span>.<span title="puma.plot_base">plot_base</span>.<a class="autorefs autorefs-internal" title="puma.plot_base.PlotLineObject" href="../plot_base/#puma.plot_base.PlotLineObject">PlotLineObject</a></code></p>


        <p>Histogram class storing info about histogram and allows to calculate ratio w.r.t
other histograms.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input data for the histogram. If bin_edges is specified (not None)
then this array is treated as the bin heights. By default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bins</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span> | <span title="list">list</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If bins is an int, it defines the number of equal-width bins in the given
range. If bins is a sequence, it defines a monotonically increasing array
of bin edges, including the rightmost edge, allowing for non-uniform
bin widths (like in numpy.histogram). By default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bins_range</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of two floats, specifying the range for the binning. If bins_range is
specified and bins is an integer, equal-width bins from bins_range[0] to
bins_range[1] are used for the histogram (like in numpy.histogram).
By default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bin_edges</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If specified, the histogram is considered "filled": the array given to
values is treated as if it was the bin heights corresponding to these
bin_edges and the "weights" input is ignored. By default None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>weights</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weights for the input data. Has to be an array of same length as the input
data with a weight for each entry. If not specified, weight 1 will be given
to each entry. The uncertainties are calculated as the square root of the
squared weights (for each bin separately). By default None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sum_squared_weights</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Only considered if the histogram is considered filled (i.e bin_edges
is specified). It is the sum_squared_weights per bin.
By default None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ratio_group</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the ratio group this histogram is compared with. The ratio group
allows you to compare different groups of histograms within one plot.
By default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flavour</code>
            </td>
            <td>
                  <code><span title="ftag">ftag</span>.<span title="ftag.Label">Label</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set, the correct colour and a label prefix will be extracted from
<code>puma.utils.global_config</code> set for this histogram.
Allowed values are e.g. "bjets", "cjets", "ujets", "bbjets", ...
By default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_flavour_label</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set to False to suppress the automatic addition of the flavour label prefix
in the label of the curve (i.e. "<span class="arithmatex"><span class="MathJax_Preview">b</span><script type="math/tex">b</script></span>-jets" in the case of b-jets).
This is ignored if <code>flavour</code> is not set. By default True</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>histtype</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>histtype</code> parameter which is handed to matplotlib.hist() when plotting the
histograms. Supported values are "bar", "barstacked", "step", "stepfilled".
By default "step"</p>
              </div>
            </td>
            <td>
                  <code>&#39;step&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>norm</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specify if the histograms are normalised, this means that histograms are
divided by the total numer of counts. Therefore, the sum of the bin counts
is equal to one, but NOT the area under the curve, which would be
sum(bin_counts * bin_width). By default True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>underoverflow</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Option to include under- and overflow values in outermost bins, by default
True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_data</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decide, if the plot object will be treated as data (black dots,
no stacking), by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>discrete_vals</code>
            </td>
            <td>
                  <code><span title="list">list</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of values if a variable only has discrete values. If discrete_vals is
specified only the bins containing these values are plotted.
By default None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments passed to <code>puma.plot_base.PlotLineObject</code></p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If input data is not of type np.ndarray or list
If weights are specified but have different length as the input values</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the input data for the histogram are invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>puma/histogram.py</code></summary>
                    <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bins</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bins_range</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bin_edges</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">weights</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sum_squared_weights</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ratio_group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flavour</span><span class="p">:</span> <span class="n">Label</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_flavour_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">histtype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;step&quot;</span><span class="p">,</span>
    <span class="n">norm</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">underoverflow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">is_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">discrete_vals</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">)):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Histogram is empty.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid type of histogram input data. Allowed values are &quot;</span>
            <span class="s2">&quot;numpy.ndarray, list, pandas.core.series.Series&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">weights</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;`values` and `weights` are not of same length.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bin_edges</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">sum_squared_weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;The Histogram has no bin edges defined and is thus not considered filled. &quot;</span>
            <span class="s2">&quot;Parameter `sum_squared_weights` is ignored.&quot;</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">bin_edges</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bins</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When bin_edges are provided, bins are not considered!&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">bin_edges</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bins</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You need to define either `bins` or `bin_edges`!&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="n">bins</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bins_range</span> <span class="o">=</span> <span class="n">bins_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span> <span class="o">=</span> <span class="n">bin_edges</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sum_squared_weights</span> <span class="o">=</span> <span class="n">sum_squared_weights</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

    <span class="c1"># This attribute allows to know how to histogram it</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="c1"># Ensure that the flavour is an instance of Flavour</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flavour</span> <span class="o">=</span> <span class="n">flavour</span>

    <span class="c1"># Set the inputs as attributes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span> <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ratio_group</span> <span class="o">=</span> <span class="n">ratio_group</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_flavour_label</span> <span class="o">=</span> <span class="n">add_flavour_label</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">histtype</span> <span class="o">=</span> <span class="n">histtype</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="n">norm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">underoverflow</span> <span class="o">=</span> <span class="n">underoverflow</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span> <span class="o">=</span> <span class="n">is_data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">discrete_vals</span><span class="p">)</span>

    <span class="c1"># Define the key (like a name) for the Histogram object. Will be set later</span>
    <span class="c1"># by the actual histogram plot</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Set the label</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;label&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># If flavour was specified, extract configuration from global config</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flavour</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flavour</span><span class="p">,</span> <span class="n">Label</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;flavour&#39; must be an instance of Label! You gave </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flavour</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Use globally defined flavour colour if not specified</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flavour</span><span class="o">.</span><span class="n">colour</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Histogram colour was set to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colour</span><span class="p">)</span>

        <span class="c1"># Add globally defined flavour label if not suppressed</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_flavour_label</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">flavour</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">flavour</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Histogram label was set to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">})</span>

    <span class="c1"># Histogram the input values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">unc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="o">=</span> <span class="n">hist_w_unc</span><span class="p">(</span>
        <span class="n">arr</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
        <span class="n">bins</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">,</span>
        <span class="n">filled</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filled</span><span class="p">,</span>
        <span class="n">bins_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bins_range</span><span class="p">,</span>
        <span class="n">normed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">,</span>
        <span class="n">bin_edges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
        <span class="n">sum_squared_weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sum_squared_weights</span><span class="p">,</span>
        <span class="n">underoverflow</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">underoverflow</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Discretise the bins if wanted</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_discrete_values</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="puma.histogram.Histogram.args_to_store" class="doc doc-heading">
            <code class=" language-python"><span class="n">args_to_store</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#puma.histogram.Histogram.args_to_store" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the arguments that need to be stored/loaded.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing">typing</span>.<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with the arguments</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="puma.histogram.Histogram.divide" class="doc doc-heading">
            <code class=" language-python"><span class="n">divide</span></code>

<a href="#puma.histogram.Histogram.divide" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate ratio between two class objects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.histogram">histogram</span>.<a class="autorefs autorefs-internal" title="puma.histogram.Histogram" href="#puma.histogram.Histogram">Histogram</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Second histogram object to calculate ratio with</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ratio</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ratio error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If binning is not identical between 2 objects
If hist attribute is not set for one of the two histograms
If bin_edges attribute is not set for one of the two histograms</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">divide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Histogram</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate ratio between two class objects.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other : Histogram</span>
<span class="sd">        Second histogram object to calculate ratio with</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        Ratio</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        Ratio error</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If binning is not identical between 2 objects</span>
<span class="sd">        If hist attribute is not set for one of the two histograms</span>
<span class="sd">        If bin_edges attribute is not set for one of the two histograms</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The binning of the two given objects do not match.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>

    <span class="c1"># Bins where the reference histogram is empty/zero, are given a ratio of np.inf</span>
    <span class="c1"># which means that the ratio plot will not have any entry in these bins.</span>
    <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">hist_ratio</span><span class="p">(</span>
        <span class="n">numerator</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span>
        <span class="n">denominator</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span>
        <span class="n">numerator_unc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unc</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># To use the matplotlib.step() function later on, the first bin is duplicated</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ratio</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">ratio</span><span class="p">)</span>
    <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ratio_unc</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">ratio_unc</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.Histogram.divide_data_mc" class="doc doc-heading">
            <code class=" language-python"><span class="n">divide_data_mc</span></code>

<a href="#puma.histogram.Histogram.divide_data_mc" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Similar as divide, but the second item doesn't need to be a histogram object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ref_hist</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hist weights of the reference.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of the ratios and ratio uncertaintes for the bins</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the binning of the two histograms doesn't match</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">divide_data_mc</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ref_hist</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Similar as divide, but the second item doesn&#39;t need to be a histogram object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ref_hist : np.ndarray</span>
<span class="sd">        Hist weights of the reference.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple</span>
<span class="sd">        Tuple of the ratios and ratio uncertaintes for the bins</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the binning of the two histograms doesn&#39;t match</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">+</span> <span class="n">ref_hist</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The binning of the two given objects do not match.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>

    <span class="c1"># Bins where the reference histogram is empty/zero, are given a ratio of np.inf</span>
    <span class="c1"># which means that the ratio plot will not have any entry in these bins.</span>
    <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">hist_ratio</span><span class="p">(</span>
        <span class="n">numerator</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span>
        <span class="n">denominator</span><span class="o">=</span><span class="n">ref_hist</span><span class="p">,</span>
        <span class="n">numerator_unc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unc</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># To use the matplotlib.step() function later on, the first bin is duplicated</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ratio</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">ratio</span><span class="p">)</span>
    <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ratio_unc</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">ratio_unc</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.Histogram.get_discrete_values" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_discrete_values</span></code>

<a href="#puma.histogram.Histogram.get_discrete_values" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Get discrete values of a variable and adjust the bins accordingly.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the bin width is larger than 1 such that potentially not
all discrete values are in a seperate bin
If the number of bins is set to 1 such that no values can be
distinguished</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_discrete_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get discrete values of a variable and adjust the bins accordingly.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the bin width is larger than 1 such that potentially not</span>
<span class="sd">        all discrete values are in a seperate bin</span>
<span class="sd">        If the number of bins is set to 1 such that no values can be</span>
<span class="sd">        distinguished</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">indice</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">i</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">discrete_val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">discrete_val</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hist</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unc</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discrete_vals</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span> <span class="o">=</span> <span class="n">bins</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Bin width is larger than 1. Choose a binning with a bin&quot;</span>
                <span class="s2">&quot; width&lt;= 1 to plot only discrete values.&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Choose a binning with more than one bin in order to plot only discrete values.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.Histogram.update" class="doc doc-heading">
            <code class=" language-python"><span class="n">update</span></code>

<a href="#puma.histogram.Histogram.update" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Update the existing histogram with new values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New values that are to be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>weights</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weights for each entry in values. Must be the same shape/size as values.
If None, each value in values will be weighted the same, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">weights</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the existing histogram with new values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    values : np.ndarray</span>
<span class="sd">        New values that are to be added.</span>
<span class="sd">    weights : np.ndarray | None, optional</span>
<span class="sd">        Weights for each entry in values. Must be the same shape/size as values.</span>
<span class="sd">        If None, each value in values will be weighted the same, by default None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Replace the weights if None</span>
    <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="c1"># Check that the weights are a np.ndarray</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>

    <span class="c1"># Call the hist_w_unc function for the new values</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">incoming_hist</span><span class="p">,</span> <span class="n">incoming_unc</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hist_w_unc</span><span class="p">(</span>
        <span class="n">arr</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
        <span class="n">bins</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">,</span>
        <span class="n">filled</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filled</span><span class="p">,</span>
        <span class="n">bins_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bins_range</span><span class="p">,</span>
        <span class="n">normed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span>
        <span class="n">bin_edges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
        <span class="n">sum_squared_weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sum_squared_weights</span><span class="p">,</span>
        <span class="n">underoverflow</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">underoverflow</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Get the new sum_of_weights</span>
    <span class="n">incoming_sum_of_weights</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">))</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span> <span class="o">+</span> <span class="n">incoming_hist</span> <span class="o">*</span> <span class="n">incoming_sum_of_weights</span>
        <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span> <span class="o">+</span> <span class="n">incoming_sum_of_weights</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">incoming_unc</span> <span class="o">*</span> <span class="n">incoming_sum_of_weights</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span> <span class="o">+</span> <span class="n">incoming_sum_of_weights</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">+=</span> <span class="n">incoming_hist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unc</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">incoming_unc</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sum_of_weights</span> <span class="o">+=</span> <span class="n">incoming_sum_of_weights</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hist</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">unc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="puma.histogram.HistogramPlot" class="doc doc-heading">
              <code class=" language-python"><span class="n">puma</span><span class="o">.</span><span class="n">histogram</span><span class="o">.</span><span class="n">HistogramPlot</span></code>

<a href="#puma.histogram.HistogramPlot" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="puma">puma</span>.<span title="puma.plot_base">plot_base</span>.<a class="autorefs autorefs-internal" title="puma.plot_base.PlotBase" href="../plot_base/#puma.plot_base.PlotBase">PlotBase</a></code></p>


        <p>Histogram plot class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>logy</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set log scale on y-axis, by default False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bin_width_in_ylabel</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specify if the bin width should be added to the ylabel, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>grid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set the grid for the plots, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stacked</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decide, if all histograms (which are not data) are stacked, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>histtype</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If stacked is used, define the type of histogram you would like to have,
default is "bar"</p>
              </div>
            </td>
            <td>
                  <code>&#39;bar&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments from <code>puma.PlotObject</code></p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If n_ratio_panels &gt; 1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>puma/histogram.py</code></summary>
                    <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">logy</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">bin_width_in_ylabel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">grid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">stacked</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">histtype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logy</span> <span class="o">=</span> <span class="n">logy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bin_width_in_ylabel</span> <span class="o">=</span> <span class="n">bin_width_in_ylabel</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span> <span class="o">=</span> <span class="n">stacked</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">histtype</span> <span class="o">=</span> <span class="n">histtype</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Histogram</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reference_object</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not more than one ratio panel supported.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialise_figure</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.add" class="doc doc-heading">
            <code class=" language-python"><span class="n">add</span></code>

<a href="#puma.histogram.HistogramPlot.add" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Adding histogram object to figure.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>histogram</code>
            </td>
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.histogram">histogram</span>.<a class="autorefs autorefs-internal" title="puma.histogram.Histogram" href="#puma.histogram.Histogram">Histogram</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Histogram curve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier for histogram, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reference</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If this histogram is used as reference for ratio calculation, by default
False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If unique identifier key is used twice</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">histogram</span><span class="p">:</span> <span class="n">Histogram</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">reference</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adding histogram object to figure.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    histogram : Histogram</span>
<span class="sd">        Histogram curve</span>
<span class="sd">    key : str | None, optional</span>
<span class="sd">        Unique identifier for histogram, by default None</span>
<span class="sd">    reference : bool, optional</span>
<span class="sd">        If this histogram is used as reference for ratio calculation, by default</span>
<span class="sd">        False</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    KeyError</span>
<span class="sd">        If unique identifier key is used twice</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If key not defined, set it to a numerical value</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">key</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check that key is not double used</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicated key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> already used for unique identifier.&quot;</span><span class="p">)</span>

    <span class="c1"># Add key to histogram object</span>
    <span class="n">histogram</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding histogram </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="c1"># Set linestyle</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">is_data</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">histogram</span><span class="o">.</span><span class="n">linestyle</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">histogram</span><span class="o">.</span><span class="n">linestyle</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span>
    <span class="c1"># Set marker</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">is_data</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">histogram</span><span class="o">.</span><span class="n">marker</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">histogram</span><span class="o">.</span><span class="n">marker</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Set colours</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">histogram</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="n">get_good_colours</span><span class="p">()[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">)]</span>
    <span class="c1"># Set alpha</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">alpha</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">histogram</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="c1"># Set linewidth</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">linewidth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">histogram</span><span class="o">.</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.6</span>
    <span class="c1"># Set markersize</span>
    <span class="k">if</span> <span class="n">histogram</span><span class="o">.</span><span class="n">markersize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">histogram</span><span class="o">.</span><span class="n">markersize</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">histogram</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">reference</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_reference</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.add_bin_width_to_ylabel" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_bin_width_to_ylabel</span></code>

<a href="#puma.histogram.HistogramPlot.add_bin_width_to_ylabel" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Adds the bin width to the ylabel of a histogram plot. If the bin with is
smaller than 0.01, scientific notation will be used.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If plotting_done is False (therefore <code>bins</code> is not yet calculated)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_bin_width_to_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds the bin width to the ylabel of a histogram plot. If the bin with is</span>
<span class="sd">    smaller than 0.01, scientific notation will be used.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If plotting_done is False (therefore `bins` is not yet calculated)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotting_done</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;`add_bin_width_to_ylabel` should be called after plotting, since bins &quot;</span>
            <span class="s2">&quot;are calculated during plotting.&quot;</span>
        <span class="p">)</span>

    <span class="n">bin_width</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">bin_width</span> <span class="o">&lt;</span> <span class="mf">1e-2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">bin_width</span><span class="si">:</span><span class="s2">.0e</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">bin_width</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.draw" class="doc doc-heading">
            <code class=" language-python"><span class="n">draw</span></code>

<a href="#puma.histogram.HistogramPlot.draw" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Draw figure.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labelpad</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spacing in points from the axes bounding box including
ticks and tick labels, by default "ratio"</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labelpad</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Draw figure.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    labelpad : int | None, optional</span>
<span class="sd">        Spacing in points from the axes bounding box including</span>
<span class="sd">        ticks and tick labels, by default &quot;ratio&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt_handles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_ratios</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_log</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_y_lim</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel_ratio</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel_ratio</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">labelpad</span><span class="o">=</span><span class="n">labelpad</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_width_in_ylabel</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_bin_width_to_ylabel</span><span class="p">()</span>

    <span class="n">legend_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">make_legend</span><span class="p">(</span><span class="n">plt_handles</span><span class="p">,</span> <span class="n">ax_mpl</span><span class="o">=</span><span class="n">legend_axis</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_title</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_atlas_style</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atlasify</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.get_reference_histo" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_reference_histo</span></code>

<a href="#puma.histogram.HistogramPlot.get_reference_histo" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Get reference histogram from list of references.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>histo</code>
            </td>
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.histogram">histogram</span>.<a class="autorefs autorefs-internal" title="puma.histogram.Histogram" href="#puma.histogram.Histogram">Histogram</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Histogram we want to calculate the ratio for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>reference_histo</code></td>            <td>
                  <code><span title="puma">puma</span>.<span title="puma.histogram">histogram</span>.<a class="autorefs autorefs-internal" title="puma.histogram.Histogram" href="#puma.histogram.Histogram">Histogram</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The reference histogram</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no reference histo was found or multiple matches.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_reference_histo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">histo</span><span class="p">:</span> <span class="n">Histogram</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Histogram</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get reference histogram from list of references.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    histo : Histogram</span>
<span class="sd">        Histogram we want to calculate the ratio for</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    reference_histo : Histogram</span>
<span class="sd">        The reference histogram</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If no reference histo was found or multiple matches.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">reference_histo</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_object</span><span class="p">:</span>
        <span class="n">reference_candidate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">histo</span><span class="o">.</span><span class="n">ratio_group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">histo</span><span class="o">.</span><span class="n">ratio_group</span> <span class="o">==</span> <span class="n">reference_candidate</span><span class="o">.</span><span class="n">ratio_group</span><span class="p">:</span>
                <span class="n">matches</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">reference_histo</span> <span class="o">=</span> <span class="n">reference_candidate</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">matches</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">reference_histo</span> <span class="o">=</span> <span class="n">reference_candidate</span>

    <span class="k">if</span> <span class="n">matches</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="n">matches</span><span class="si">}</span><span class="s2"> matching reference candidates, but only one match is allowed.&quot;</span>
        <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Reference histogram for &#39;</span><span class="si">%s</span><span class="s2">&#39; is &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">histo</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">reference_histo</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">reference_histo</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.plot" class="doc doc-heading">
            <code class=" language-python"><span class="n">plot</span></code>

<a href="#puma.histogram.HistogramPlot.plot" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Plotting curves. This also generates the bins of the histograms that are
added to the plot. Plot objects are drawn in the same order as they were added
to the plot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments passed to matplotlib.axes.Axes.hist()</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.line_plot_2d">line_plot_2d</span>.<span title="puma.line_plot_2d.Line2D">Line2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>matplotlib Line2D object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If specified bins type is not supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plotting curves. This also generates the bins of the histograms that are</span>
<span class="sd">    added to the plot. Plot objects are drawn in the same order as they were added</span>
<span class="sd">    to the plot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    **kwargs : Any</span>
<span class="sd">        Keyword arguments passed to matplotlib.axes.Axes.hist()</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Line2D</span>
<span class="sd">        matplotlib Line2D object</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If specified bins type is not supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the settings from the to-be-plotted Histogram objects</span>
    <span class="n">norm_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">iter_histo</span><span class="o">.</span><span class="n">norm</span> <span class="k">for</span> <span class="n">iter_histo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
    <span class="n">bin_edges_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">iter_histo</span><span class="o">.</span><span class="n">bin_edges</span> <span class="k">for</span> <span class="n">iter_histo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="c1"># Check consistency of norm setting</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="n">norm_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">norm_list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Histogram objects have different settings for &#39;norm&#39;!&quot;</span><span class="p">)</span>

    <span class="c1"># Check consistency of bin_edges</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span> <span class="o">=</span> <span class="n">bin_edges_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">bin_edges_list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Histogram objects have different &#39;bin_edges&#39;!&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="ow">and</span> <span class="s2">&quot;norm&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;You are plotting normalised distributions but &#39;norm&#39; is not &quot;</span>
            <span class="s2">&quot;included in your y-label.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Stacked plots and normalised plots at the same time are not available.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Init the plt_handles list</span>
    <span class="n">plt_handles</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Stacked dict for the stacked histogram</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;bins&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;weights&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;unc&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_order</span><span class="p">:</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="c1"># If discrete values were used, adapt the x-axis ticks</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">discrete_vals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">discrete_vals</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>

        <span class="c1"># Check if the histogram is data</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">is_data</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># Plot data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span>
                <span class="n">yerr</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">unc</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">marker</span><span class="p">,</span>
                <span class="n">markersize</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">markersize</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">plt_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span>
                    <span class="p">[],</span>
                    <span class="p">[],</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                    <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                    <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">marker</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;bins&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">hist</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">unc</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">elem</span><span class="o">.</span><span class="n">unc</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

            <span class="c1"># Add the element to the legend with a &quot;bar&quot;</span>
            <span class="n">plt_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">mpl</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Plot histogram</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">bins</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
                <span class="n">weights</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">hist</span><span class="p">,</span>
                <span class="n">histtype</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">histtype</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Plot histogram uncertainty</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span><span class="p">:</span>
                <span class="n">bottom_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">elem</span><span class="o">.</span><span class="n">band</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">elem</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>
                <span class="n">top_error</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">band</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">elem</span><span class="o">.</span><span class="n">unc</span>
                <span class="n">top_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">top_error</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">top_error</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
                    <span class="n">y1</span><span class="o">=</span><span class="n">bottom_error</span><span class="p">,</span>
                    <span class="n">y2</span><span class="o">=</span><span class="n">top_error</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                    <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">step</span><span class="o">=</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span>
                    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="c1"># Add standard &quot;Line&quot; to legend</span>
            <span class="n">plt_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span>
                    <span class="p">[],</span>
                    <span class="p">[],</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                    <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                    <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">marker</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
            <span class="n">bins</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;bins&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
            <span class="n">histtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">histtype</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
            <span class="n">stacked</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create a total weights entry to correctly plot the ratio</span>
        <span class="c1"># Total weights is here the y-value of all contributions stacked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;total_weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Check if errors should be drawn</span>
    <span class="c1"># If stacked is true, plot the combined uncertainty</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">:</span>
        <span class="c1"># Calculate the y-values of the bottom error</span>
        <span class="n">bottom_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;total_weights&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span>
        <span class="n">bottom_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">bottom_error</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">bottom_error</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>

        <span class="c1"># Calculate the y-values of the top error</span>
        <span class="n">top_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;total_weights&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;unc&quot;</span><span class="p">]</span>
        <span class="n">top_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">top_error</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">top_error</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>

        <span class="c1"># Fill the space between bottom and top with the unc. band</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
            <span class="n">y1</span><span class="o">=</span><span class="n">bottom_error</span><span class="p">,</span>
            <span class="n">y2</span><span class="o">=</span><span class="n">top_error</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">hatch</span><span class="o">=</span><span class="s2">&quot;/////&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Add a label for the unc. in the legend</span>
        <span class="n">plt_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">mpl</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
                <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
                <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Stat. unc.&quot;</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">hatch</span><span class="o">=</span><span class="s2">&quot;/////&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plotting_done</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">plt_handles</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.plot_ratios" class="doc doc-heading">
            <code class=" language-python"><span class="n">plot_ratios</span></code>

<a href="#puma.histogram.HistogramPlot.plot_ratios" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Plotting ratio histograms.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no reference histogram is defined</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot_ratios</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plotting ratio histograms.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If no reference histogram is defined</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if this is a stacked plot</span>
    <span class="c1"># Plot ratio only between data and the stacked histos</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_order</span><span class="p">:</span>
        <span class="c1"># Get the object which is to be plotted</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_objects</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Bin edges of plot object not set. This is done in &quot;</span>
                <span class="s2">&quot;histogram_plot.plot(), so it has to be called before &quot;</span>
                <span class="s2">&quot;plot_ratios() is called.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Check if this is going to be Data/MC (Data/stacked plot)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">:</span>
            <span class="c1"># Check this is data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">is_data</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Using the total weights (full stacked histo) as reference for data</span>
            <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">divide_data_mc</span><span class="p">(</span>
                <span class="n">ref_hist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_dict</span><span class="p">[</span><span class="s2">&quot;total_weights&quot;</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_object</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Please specify a reference curve.&quot;</span><span class="p">)</span>

            <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_unc</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_reference_histo</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span>

        <span class="c1"># Plot the ratio values with the step function</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">is_data</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">y</span><span class="o">=</span><span class="n">ratio</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                    <span class="n">yerr</span><span class="o">=</span><span class="n">ratio_unc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                    <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                    <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">marker</span><span class="p">,</span>
                    <span class="n">markersize</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">markersize</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">step</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">ratio</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span>
                <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Plot the ratio uncertainty</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
                    <span class="n">y1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">ratio</span> <span class="o">-</span> <span class="n">ratio_unc</span><span class="p">,</span> <span class="n">nan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">posinf</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                    <span class="n">y2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">ratio_unc</span><span class="p">,</span> <span class="n">nan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">posinf</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                    <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">step</span><span class="o">=</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span>
                    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stacked</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_errors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">bin_edges</span><span class="p">,</span>
            <span class="n">y1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">((</span><span class="n">ratio</span> <span class="o">-</span> <span class="n">ratio_unc</span><span class="p">)</span> <span class="o">/</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">nan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">posinf</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">y2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">((</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">ratio_unc</span><span class="p">)</span> <span class="o">/</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">nan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">posinf</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.histogram.HistogramPlot.set_reference" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_reference</span></code>

<a href="#puma.histogram.HistogramPlot.set_reference" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Setting the reference histogram curves used in the ratios.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier of histogram object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/histogram.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Setting the reference histogram curves used in the ratios.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    key : str</span>
<span class="sd">        Unique identifier of histogram object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reference_object</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding &#39;</span><span class="si">%s</span><span class="s2">&#39; to reference histogram(s)&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 19, 2026 22:53:55 UTC">February 19, 2026</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 19, 2026 22:53:55 UTC">February 19, 2026</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 CERN for the benefit of the ATLAS collaboration
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>