
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the PUMA plotting framework">
      
      
        <meta name="author" content="Umami Team">
      
      
        <link rel="canonical" href="https://umami-hep.github.io/puma/api/roc/">
      
      
        <link rel="prev" href="../histogram/">
      
      
        <link rel="next" href="../int_eff/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>ROC - PUMA: Plotting UMami Api</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#puma.roc.Roc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PUMA: Plotting UMami Api" class="md-header__button md-logo" aria-label="PUMA: Plotting UMami Api" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PUMA: Plotting UMami Api
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ROC
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/umami-hep/puma" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../hlapi/" class="md-tabs__link">
          
  
    
  
  High level API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/tutorial-plotting/" class="md-tabs__link">
        
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dev/development_guidelines/" class="md-tabs__link">
          
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../plot_base/" class="md-tabs__link">
          
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PUMA: Plotting UMami Api" class="md-nav__button md-logo" aria-label="PUMA: Plotting UMami Api" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PUMA: Plotting UMami Api
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/umami-hep/puma" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../examples/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dummy_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dummy Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/histograms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Histograms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/rocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROC curves
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/int_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrated efficiency plot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/var_vs_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable vs efficiency Plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/fraction_scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fraction Scan Plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pie_charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pie charts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/line_plots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Line plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/confusion_matrix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confusion Matrix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/precision_recall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precision Recall
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/matrix_plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix Plot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../hlapi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    High level API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            High level API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/high_level_aux_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High level API for aux task plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/n_track_origin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Number of Tracks per Jet per Origin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hlapi/yuma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YUMA (Yaml Plotting)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/tutorial-plotting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/development_guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Good coding practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docs_development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docs development
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot_base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../histogram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Histogram
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ROC
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ROC
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#puma.roc.Roc" class="md-nav__link">
    <span class="md-ellipsis">
      Roc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Roc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.args_to_store" class="md-nav__link">
    <span class="md-ellipsis">
      args_to_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.non_zero" class="md-nav__link">
    <span class="md-ellipsis">
      non_zero
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.non_zero_mask" class="md-nav__link">
    <span class="md-ellipsis">
      non_zero_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.binomial_error" class="md-nav__link">
    <span class="md-ellipsis">
      binomial_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.divide" class="md-nav__link">
    <span class="md-ellipsis">
      divide
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puma.roc.RocPlot" class="md-nav__link">
    <span class="md-ellipsis">
      RocPlot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RocPlot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.add_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      add_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.add_roc" class="md-nav__link">
    <span class="md-ellipsis">
      add_roc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.draw" class="md-nav__link">
    <span class="md-ellipsis">
      draw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.get_xlim_auto" class="md-nav__link">
    <span class="md-ellipsis">
      get_xlim_auto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.make_split_legend" class="md-nav__link">
    <span class="md-ellipsis">
      make_split_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.plot_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      plot_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.plot_roc" class="md-nav__link">
    <span class="md-ellipsis">
      plot_roc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.set_ratio_class" class="md-nav__link">
    <span class="md-ellipsis">
      set_ratio_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.set_roc_reference" class="md-nav__link">
    <span class="md-ellipsis">
      set_roc_reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../int_eff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrated Efficiency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../var_vs_var/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variable vs Variable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fraction_scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fraction Scan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pie_chart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pie Chart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../matshow_plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matshow Plot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#puma.roc.Roc" class="md-nav__link">
    <span class="md-ellipsis">
      Roc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Roc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.args_to_store" class="md-nav__link">
    <span class="md-ellipsis">
      args_to_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.non_zero" class="md-nav__link">
    <span class="md-ellipsis">
      non_zero
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.non_zero_mask" class="md-nav__link">
    <span class="md-ellipsis">
      non_zero_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.binomial_error" class="md-nav__link">
    <span class="md-ellipsis">
      binomial_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.Roc.divide" class="md-nav__link">
    <span class="md-ellipsis">
      divide
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puma.roc.RocPlot" class="md-nav__link">
    <span class="md-ellipsis">
      RocPlot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RocPlot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.add_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      add_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.add_roc" class="md-nav__link">
    <span class="md-ellipsis">
      add_roc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.draw" class="md-nav__link">
    <span class="md-ellipsis">
      draw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.get_xlim_auto" class="md-nav__link">
    <span class="md-ellipsis">
      get_xlim_auto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.make_split_legend" class="md-nav__link">
    <span class="md-ellipsis">
      make_split_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.plot_ratios" class="md-nav__link">
    <span class="md-ellipsis">
      plot_ratios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.plot_roc" class="md-nav__link">
    <span class="md-ellipsis">
      plot_roc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.set_ratio_class" class="md-nav__link">
    <span class="md-ellipsis">
      set_ratio_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#puma.roc.RocPlot.set_roc_reference" class="md-nav__link">
    <span class="md-ellipsis">
      set_roc_reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>ROC</h1>

<div class="doc doc-object doc-class">



<h2 id="puma.roc.Roc" class="doc doc-heading">
              <code class=" language-python"><span class="n">puma</span><span class="o">.</span><span class="n">roc</span><span class="o">.</span><span class="n">Roc</span></code>

<a href="#puma.roc.Roc" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="puma">puma</span>.<span title="puma.plot_base">plot_base</span>.<a class="autorefs autorefs-internal" title="puma.plot_base.PlotLineObject" href="../plot_base/#puma.plot_base.PlotLineObject">PlotLineObject</a></code></p>


        <p>Represent a single ROC curve and allows to calculate ratio w.r.t other ROCs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sig_eff</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array of signal efficiencies</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bkg_rej</code>
            </td>
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array of background rejection</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>n_test</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of events used to calculate the background efficiencies,
by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rej_class</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="ftag">ftag</span>.<span title="ftag.Label">Label</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rejection class, e.g. for b-tagging anc charm rejection "cjets",
by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>signal_class</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signal class, e.g. for b-tagging "bjets", by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Identifier for roc curve e.g. tagger, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ratio_group</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Identifies the reference ROC group for ratio calculation, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_bkg_eff</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Correct error calculation for background efficiency ROCs instead of
background rejection, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments passed to <code>puma.PlotLineObject</code></p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>sig_eff</code> and <code>bkg_rej</code> have a different shape</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>puma/roc.py</code></summary>
                    <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sig_eff</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">bkg_rej</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">n_test</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rej_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Label</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">signal_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ratio_group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">use_bkg_eff</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sig_eff</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bkg_rej</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The shape of `sig_eff` (</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">sig_eff</span><span class="p">)</span><span class="si">}</span><span class="s2">) and `bkg_rej` &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">bkg_rej</span><span class="p">)</span><span class="si">}</span><span class="s2">) have to be identical.&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_eff</span> <span class="o">=</span> <span class="n">sig_eff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bkg_rej</span> <span class="o">=</span> <span class="n">bkg_rej</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_test</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">n_test</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_test</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">signal_class</span> <span class="o">=</span> <span class="n">signal_class</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rej_class</span> <span class="o">=</span> <span class="n">rej_class</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rej_class</span><span class="p">,</span> <span class="n">Label</span><span class="p">)</span> <span class="k">else</span> <span class="n">rej_class</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ratio_group</span> <span class="o">=</span> <span class="n">ratio_group</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">rej_class</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">use_bkg_eff</span> <span class="o">=</span> <span class="n">use_bkg_eff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

    <span class="c1"># Check that the rejection class is a string</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_class</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_class</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;rej_class&#39; must either be a string or a Label! You gave </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_class</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="puma.roc.Roc.args_to_store" class="doc doc-heading">
            <code class=" language-python"><span class="n">args_to_store</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#puma.roc.Roc.args_to_store" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the arguments that need to be stored/loaded.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing">typing</span>.<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with the arguments</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="puma.roc.Roc.non_zero" class="doc doc-heading">
            <code class=" language-python"><span class="n">non_zero</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#puma.roc.Roc.non_zero" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Abstraction of <code>non_zero_mask</code>.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Masked signal efficiency</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Masked background rejection</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="puma.roc.Roc.non_zero_mask" class="doc doc-heading">
            <code class=" language-python"><span class="n">non_zero_mask</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#puma.roc.Roc.non_zero_mask" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Masking points where rejection is 0 and no signal efficiency change present.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Masked indices</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="puma.roc.Roc.binomial_error" class="doc doc-heading">
            <code class=" language-python"><span class="n">binomial_error</span></code>

<a href="#puma.roc.Roc.binomial_error" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate binomial error of roc curve.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>norm</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True calulate relative error, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>n_test</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of events used to calculate the background efficiencies,
by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Binomial error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no <code>n_test</code> was provided</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">binomial_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">norm</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">n_test</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate binomial error of roc curve.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    norm : bool, optional</span>
<span class="sd">        If True calulate relative error, by default False</span>
<span class="sd">    n_test : int | None</span>
<span class="sd">        Number of events used to calculate the background efficiencies,</span>
<span class="sd">        by default None</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        Binomial error</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If no `n_test` was provided</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">n_test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_test</span>
    <span class="k">if</span> <span class="n">n_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No `n_test` provided, cannot calculate binomial error!&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_bkg_eff</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">calculate_efficiency_error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bkg_rej</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">],</span> <span class="n">n_test</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">calculate_rejection_error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bkg_rej</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">],</span> <span class="n">n_test</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.Roc.divide" class="doc doc-heading">
            <code class=" language-python"><span class="n">divide</span></code>

<a href="#puma.roc.Roc.divide" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate ratio between the roc curve and another roc.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>roc_comp</code>
            </td>
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.roc">roc</span>.<a class="autorefs autorefs-internal" title="puma.roc.Roc" href="#puma.roc.Roc">Roc</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Second roc curve to calculate ratio with</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inverse</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If False the ratio is calculated <code>this_roc / roc_comp</code>,
if True the inverse is calculated</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span>, <span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span>, <span title="numpy">numpy</span>.<span title="numpy.ndarray">ndarray</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The signal efficiency used for the ratio calculation which is the overlapping
interval of the two roc curves
The ratio between the two ROCs
The ratio error between the two ROCs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the signal efficiency between the two ROCs do not match</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">divide</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">roc_comp</span><span class="p">:</span> <span class="n">Roc</span><span class="p">,</span>
    <span class="n">inverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate ratio between the roc curve and another roc.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    roc_comp : Roc</span>
<span class="sd">        Second roc curve to calculate ratio with</span>
<span class="sd">    inverse : bool</span>
<span class="sd">        If False the ratio is calculated `this_roc / roc_comp`,</span>
<span class="sd">        if True the inverse is calculated</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[np.ndarray, np.ndarray, np.ndarray]</span>
<span class="sd">        The signal efficiency used for the ratio calculation which is the overlapping</span>
<span class="sd">        interval of the two roc curves</span>
<span class="sd">        The ratio between the two ROCs</span>
<span class="sd">        The ratio error between the two ROCs</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the signal efficiency between the two ROCs do not match</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">,</span> <span class="n">roc_comp</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Signal efficiencies of the two ROCs do not match.&quot;</span><span class="p">)</span>

    <span class="n">ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bkg_rej</span> <span class="o">/</span> <span class="n">roc_comp</span><span class="o">.</span><span class="n">bkg_rej</span>
    <span class="k">if</span> <span class="n">inverse</span><span class="p">:</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">ratio</span>

    <span class="n">ratio_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">binomial_error</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_test</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_err</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="puma.roc.RocPlot" class="doc doc-heading">
              <code class=" language-python"><span class="n">puma</span><span class="o">.</span><span class="n">roc</span><span class="o">.</span><span class="n">RocPlot</span></code>

<a href="#puma.roc.RocPlot" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="puma">puma</span>.<span title="puma.plot_base">plot_base</span>.<a class="autorefs autorefs-internal" title="puma.plot_base.PlotBase" href="../plot_base/#puma.plot_base.PlotBase">PlotBase</a></code></p>


        <p>ROC plot class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>grid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set the grid for the plots.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments from <code>puma.PlotObject</code></p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>puma/roc.py</code></summary>
                    <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Roc</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">roc_ratios</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Label</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialise_figure</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_layout_engine</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">h_pad</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">eff_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eff_max</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_linestyles</span> <span class="o">=</span> <span class="n">get_good_linestyles</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">legend_flavs</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rej_leg_loc</span> <span class="o">=</span> <span class="s2">&quot;ratio&quot;</span> <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;n_ratio_panels&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;lower left&quot;</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.add_ratios" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_ratios</span></code>

<a href="#puma.roc.RocPlot.add_ratios" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Calculating ratios.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If number of reference rocs and ratio panels don't match
If no ratio classes are set</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_ratios</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculating ratios.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If number of reference rocs and ratio panels don&#39;t match</span>
<span class="sd">        If no ratio classes are set</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">)</span><span class="si">}</span><span class="s2"> reference rocs defined but requested &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span><span class="si">}</span><span class="s2"> ratio panels.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Ratio classes not set, set them first with `set_ratio_class`.&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">rej_class</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_ratios</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">rej_class</span><span class="o">=</span><span class="n">rej_class</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.add_roc" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_roc</span></code>

<a href="#puma.roc.RocPlot.add_roc" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Adding puma.Roc object to figure.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>roc_curve</code>
            </td>
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.roc">roc</span>.<a class="autorefs autorefs-internal" title="puma.roc.Roc" href="#puma.roc.Roc">Roc</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ROC curve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier for roc_curve, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reference</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If roc is used as reference for ratio calculation, by default False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If unique identifier key is used twice</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_roc</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">roc_curve</span><span class="p">:</span> <span class="n">Roc</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">reference</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adding puma.Roc object to figure.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    roc_curve : Roc</span>
<span class="sd">        ROC curve</span>
<span class="sd">    key : str | None, optional</span>
<span class="sd">        Unique identifier for roc_curve, by default None</span>
<span class="sd">    reference : bool, optional</span>
<span class="sd">        If roc is used as reference for ratio calculation, by default False</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    KeyError</span>
<span class="sd">        If unique identifier key is used twice</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">key</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicated key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> already used for roc unique identifier.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">roc_curve</span>
    <span class="c1"># set linestyle</span>
    <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_linestyles</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span>
        <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">]</span>
        <span class="ow">and</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;You specified a different linestyle for the same rejection class &quot;</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">. Will keep the linestyle defined first.&quot;</span><span class="p">,</span>
            <span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roc_curve</span><span class="o">.</span><span class="n">linestyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">]</span>

    <span class="c1"># set colours</span>
    <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">get_good_colours</span><span class="p">()[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span>
        <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="ow">and</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;You specified a different colour for the same label&quot;</span>
            <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">. This will lead to a mismatch in the line colours&quot;</span>
            <span class="s2">&quot; and the legend.&quot;</span><span class="p">,</span>
            <span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roc_curve</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_colours</span><span class="p">[</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">reference</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting roc </span><span class="si">%s</span><span class="s2"> as reference for </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_roc_reference</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">rej_class</span><span class="o">=</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">rej_class</span><span class="p">,</span>
            <span class="n">ratio_group</span><span class="o">=</span><span class="n">roc_curve</span><span class="o">.</span><span class="n">ratio_group</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference_label</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="o">.</span><span class="n">label</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.draw" class="doc doc-heading">
            <code class=" language-python"><span class="n">draw</span></code>

<a href="#puma.roc.RocPlot.draw" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Draw plotting.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labelpad</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spacing in points from the axes bounding box including
ticks and tick labels, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">labelpad</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Draw plotting.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    labelpad : int | None, optional</span>
<span class="sd">        Spacing in points from the axes bounding box including</span>
<span class="sd">        ticks and tick labels, by default None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt_handles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_roc</span><span class="p">()</span>
    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim_auto</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span>
        <span class="n">xmin</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span>
        <span class="n">xmax</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_ratios</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_title</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_log</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_y_lim</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="p">)</span>

    <span class="n">common_ratio_ylabel_text</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;reference_label&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_label</span><span class="p">:</span>
        <span class="n">common_ratio_ylabel_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ratio to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_label</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_legend</span><span class="p">(</span><span class="n">plt_handles</span><span class="p">,</span> <span class="n">ax_mpl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rej_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">[</span><span class="n">rej_class</span><span class="p">]</span> <span class="o">=</span> <span class="n">rej_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_split_legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">plt_handles</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plotting_done</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_atlas_style</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">atlasify</span><span class="p">()</span>
        <span class="c1"># atlasify can only handle one legend. Therefore, we remove the frame of</span>
        <span class="c1"># the second legend by hand</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_flavs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend_flavs</span><span class="o">.</span><span class="n">set_frame_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Ensure the figure layout is calculated before getting extents</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

    <span class="c1"># Add the common ratio label as figure text if it exists</span>
    <span class="k">if</span> <span class="n">common_ratio_ylabel_text</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">get_text</span><span class="p">():</span>
        <span class="n">main_ylabel_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">()</span>
        <span class="n">main_ylabel_disp_bbox</span> <span class="o">=</span> <span class="n">main_ylabel_obj</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">main_ylabel_fig_bbox</span> <span class="o">=</span> <span class="n">main_ylabel_disp_bbox</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">ratio_ylabel_offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">labelpad</span><span class="p">:</span>
            <span class="n">fig_width_inches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_figwidth</span><span class="p">()</span>
            <span class="c1"># The default labelpad for the axis_top is 4 points</span>
            <span class="n">ratio_ylabel_offset_inchs</span> <span class="o">=</span> <span class="p">(</span><span class="n">labelpad</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">/</span> <span class="mi">72</span>
            <span class="n">ratio_ylabel_offset</span> <span class="o">=</span> <span class="n">ratio_ylabel_offset_inchs</span> <span class="o">/</span> <span class="n">fig_width_inches</span>

        <span class="n">fig_text_x</span> <span class="o">=</span> <span class="n">main_ylabel_fig_bbox</span><span class="o">.</span><span class="n">x0</span> <span class="o">-</span> <span class="n">ratio_ylabel_offset</span>
        <span class="n">last_ratio_ax_bbox_fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">fig_text_y</span> <span class="o">=</span> <span class="n">last_ratio_ax_bbox_fig</span><span class="o">.</span><span class="n">y0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="n">fig_text_x</span><span class="p">,</span>
            <span class="n">fig_text_y</span><span class="p">,</span>
            <span class="n">common_ratio_ylabel_text</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_fontsize</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">adjust_ylabels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.get_xlim_auto" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_xlim_auto</span></code>

<a href="#puma.roc.RocPlot.get_xlim_auto" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Returns min and max efficiency values.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Min and max efficiency values</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_xlim_auto</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns min and max efficiency values.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    float</span>
<span class="sd">        Min and max efficiency values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eff_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">eff_min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eff_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">eff_min</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eff_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eff_max</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.make_split_legend" class="doc doc-heading">
            <code class=" language-python"><span class="n">make_split_legend</span></code>

<a href="#puma.roc.RocPlot.make_split_legend" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Draw legend for the case of 2 ratios, splitting up legend into models and
rejection class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>handles</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Line2D objects to extract info for legend</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If not 2 ratios requested</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">make_split_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handles</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Draw legend for the case of 2 ratios, splitting up legend into models and</span>
<span class="sd">    rejection class.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handles : list</span>
<span class="sd">        List of Line2D objects to extract info for legend</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If not 2 ratios requested</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;For a split legend you need 2 ratio panels.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_leg_loc</span> <span class="o">==</span> <span class="s2">&quot;ratio&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">rej_class</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">legend_line</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span>
                <span class="p">[],</span>
                <span class="p">[],</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">[</span><span class="n">rej_class</span><span class="p">],</span>
                <span class="n">linestyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">[</span><span class="n">rej_class</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
                <span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">legend_line</span><span class="p">],</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">legend_line</span><span class="o">.</span><span class="n">get_label</span><span class="p">()],</span>
                <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span>
                <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_fontsize</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">line_list_rej</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span>
                <span class="p">[],</span>
                <span class="p">[],</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">[</span><span class="n">rej_class</span><span class="p">],</span>
                <span class="n">linestyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_class_ls</span><span class="p">[</span><span class="n">rej_class</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">rej_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">legend_flavs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="n">handles</span><span class="o">=</span><span class="n">line_list_rej</span><span class="p">,</span>
            <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">handle</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="n">line_list_rej</span><span class="p">],</span>
            <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rej_leg_loc</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_fontsize</span><span class="p">,</span>
            <span class="n">ncol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_ncol</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Add the second legend to plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_flavs</span><span class="p">)</span>

    <span class="c1"># Get the labels for the legends</span>
    <span class="n">labels_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lines_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">handles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">labels_list</span><span class="p">:</span>
            <span class="n">labels_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">())</span>
            <span class="n">lines_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="c1"># Define the legend</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
        <span class="n">handles</span><span class="o">=</span><span class="n">lines_list</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels_list</span><span class="p">,</span>
        <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_loc</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_fontsize</span><span class="p">,</span>
        <span class="n">ncol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leg_ncol</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.plot_ratios" class="doc doc-heading">
            <code class=" language-python"><span class="n">plot_ratios</span></code>

<a href="#puma.roc.RocPlot.plot_ratios" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Plotting ratio curves.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>axis</code>
            </td>
            <td>
                  <code><span title="matplotlib">matplotlib</span>.<span title="matplotlib.pyplot">pyplot</span>.<span title="matplotlib.pyplot.axis">axis</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>matplotlib axis object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rej_class</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rejection class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot_ratios</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">rej_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plotting ratio curves.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    axis : plt.axis</span>
<span class="sd">        matplotlib axis object</span>
<span class="sd">    rej_class : str</span>
<span class="sd">        Rejection class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">rej_class</span> <span class="o">!=</span> <span class="n">rej_class</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">sig_eff</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_err</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">[</span><span class="n">rej_class</span><span class="p">][</span><span class="n">elem</span><span class="o">.</span><span class="n">ratio_group</span><span class="p">]]</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">roc_ratios</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">sig_eff</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio_err</span><span class="p">)</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">sig_eff</span><span class="p">,</span>
            <span class="n">ratio</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ratio_err</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
                <span class="n">sig_eff</span><span class="p">,</span>
                <span class="n">ratio</span> <span class="o">-</span> <span class="n">ratio_err</span><span class="p">,</span>
                <span class="n">ratio</span> <span class="o">+</span> <span class="n">ratio_err</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
                <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.plot_roc" class="doc doc-heading">
            <code class=" language-python"><span class="n">plot_roc</span></code>

<a href="#puma.roc.RocPlot.plot_roc" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Plotting roc curves.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments passed to plt.axis.plot</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="puma">puma</span>.<span title="puma.line_plot_2d">line_plot_2d</span>.<span title="puma.line_plot_2d.Line2D">Line2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>matplotlib Line2D object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot_roc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plotting roc curves.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    **kwargs: Any</span>
<span class="sd">        Keyword arguments passed to plt.axis.plot</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Line2D</span>
<span class="sd">        matplotlib Line2D object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt_handles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rocs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">plt_handles</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">],</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">bkg_rej</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">],</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">linestyle</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">label</span> <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">key</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">n_test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if uncertainties are available for roc plotting their uncertainty as</span>
            <span class="c1"># a band around the roc itself</span>
            <span class="n">rej_band_down</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">elem</span><span class="o">.</span><span class="n">bkg_rej</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">elem</span><span class="o">.</span><span class="n">binomial_error</span><span class="p">()[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">rej_band_up</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">elem</span><span class="o">.</span><span class="n">bkg_rej</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">]</span> <span class="o">+</span> <span class="n">elem</span><span class="o">.</span><span class="n">binomial_error</span><span class="p">()[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_top</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
                <span class="n">elem</span><span class="o">.</span><span class="n">sig_eff</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">non_zero_mask</span><span class="p">],</span>
                <span class="n">rej_band_down</span><span class="p">,</span>
                <span class="n">rej_band_up</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
                <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">plt_handles</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.set_ratio_class" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_ratio_class</span></code>

<a href="#puma.roc.RocPlot.set_ratio_class" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Associate the rejection class to a ratio panel adn set the legend label.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ratio_panel</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ratio panel either 1 or 2</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rej_class</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="ftag">ftag</span>.<span title="ftag.Label">Label</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rejection class associated to that panel. Either a Label instance or a string</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rej_class_label</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If rej_class is not a Label, this label must be given</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the rej_class is a string and rej_class_label is not defined</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_ratio_class</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ratio_panel</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">rej_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Label</span><span class="p">,</span>
    <span class="n">rej_class_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Associate the rejection class to a ratio panel adn set the legend label.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ratio_panel : int</span>
<span class="sd">        Ratio panel either 1 or 2</span>
<span class="sd">    rej_class : str | Label</span>
<span class="sd">        Rejection class associated to that panel. Either a Label instance or a string</span>
<span class="sd">    rej_class_label : str | None, optional</span>
<span class="sd">        If rej_class is not a Label, this label must be given</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    TypeError</span>
<span class="sd">        If the rej_class is a string and rej_class_label is not defined</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rej_class</span><span class="p">,</span> <span class="n">Label</span><span class="p">):</span>
        <span class="n">rej_class_label_str</span> <span class="o">=</span> <span class="n">rej_class</span><span class="o">.</span><span class="n">label</span>
        <span class="n">rej_class_name</span> <span class="o">=</span> <span class="n">rej_class</span><span class="o">.</span><span class="n">name</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rej_class_label</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;&#39;rej_class_label&#39; must be a string when &#39;rej_class&#39; is not a Label!&quot;</span>
            <span class="p">)</span>
        <span class="n">rej_class_label_str</span> <span class="o">=</span> <span class="n">rej_class_label</span>
        <span class="n">rej_class_name</span> <span class="o">=</span> <span class="n">rej_class</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">rej_axes</span><span class="p">[</span><span class="n">rej_class_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_axes</span><span class="p">[</span><span class="n">ratio_panel</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">rej_class_label_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;jets&quot;</span><span class="p">,</span> <span class="s2">&quot;jet&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_ratio_label</span><span class="p">(</span><span class="n">ratio_panel</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> ratio&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leg_rej_labels</span><span class="p">[</span><span class="n">rej_class_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">rej_class_label_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="puma.roc.RocPlot.set_roc_reference" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_roc_reference</span></code>

<a href="#puma.roc.RocPlot.set_roc_reference" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Setting the reference roc curves used in the ratios.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier of roc object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rej_class</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="ftag">ftag</span>.<span title="ftag.Label">Label</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rejection class encoded in roc curve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ratio_group</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ratio group this roc is reference for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If more rejection classes are set than actual ratio panels available.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>puma/roc.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_roc_reference</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">rej_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Label</span><span class="p">,</span>
    <span class="n">ratio_group</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Setting the reference roc curves used in the ratios.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    key : str</span>
<span class="sd">        Unique identifier of roc object</span>
<span class="sd">    rej_class : str | Label</span>
<span class="sd">        Rejection class encoded in roc curve</span>
<span class="sd">    ratio_group : str</span>
<span class="sd">        Ratio group this roc is reference for</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If more rejection classes are set than actual ratio panels available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that rej_class is not an instance of label</span>
    <span class="n">rej_class_str</span> <span class="o">=</span> <span class="n">rej_class</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rej_class</span><span class="p">,</span> <span class="n">Label</span><span class="p">)</span> <span class="k">else</span> <span class="n">rej_class</span>

    <span class="k">if</span> <span class="n">rej_class_str</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_ratio_panels</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;You cannot set more rejection classes than available ratio panels.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">[</span><span class="n">rej_class_str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">ratio_group</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">[</span><span class="n">rej_class_str</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ratio_group</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;You specified a second roc curve </span><span class="si">%s</span><span class="s2"> as reference for ratio. &quot;</span>
                <span class="s2">&quot;Using it as new reference instead of </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                <span class="n">key</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">[</span><span class="n">rej_class_str</span><span class="p">][</span><span class="n">ratio_group</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference_roc</span><span class="p">[</span><span class="n">rej_class_str</span><span class="p">][</span><span class="n">ratio_group</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 19, 2026 22:53:55 UTC">February 19, 2026</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 19, 2026 22:53:55 UTC">February 19, 2026</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 CERN for the benefit of the ATLAS collaboration
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>